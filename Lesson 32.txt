import cv2
import os

IMAGE_LIST = ["/home/wintermute/image10.jpeg", "/home/wintermute/image11.jpeg", "/home/wintermute/image12.jpeg"]

images = []
for path in IMAGE_LIST:
    if not os.path.exists(path):
        print(f"Error: image '{path}' not found.")
        exit()
    img = cv2.imread(path)
    if img is None:
        print(f"Error: failed to load '{path}'")
        exit()
    images.append(img)

print(f"Loaded {len(images)} images.")

stitcher = cv2.Stitcher_create()
status, pano = stitcher.stitch(images)

if status == cv2.Stitcher_OK:
    print("Stitching successful!")

    cv2.namedWindow("pano", cv2.WINDOW_NORMAL)
    cv2.imshow("pano", pano)

    cv2.imwrite("final.jpg", pano)
    print("Saved as final.jpg")

    cv2.waitKey(0)
    cv2.destroyAllWindows()
else:
    print(f"Stitching failed. Error code: {status}")